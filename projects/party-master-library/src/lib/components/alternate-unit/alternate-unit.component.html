
<div class="col-6 my-2">
  <label for="Alternate-info" class="form-label-header">Alternate Unit Info</label>
</div>
<div class="container">
  <table class="table  table-bordered" >
    <thead>
      <tr>
        <th rowspan="2" style="width:3rem;" >SN</th>
        <th rowspan="2" >Alternate Unit</th>
        <th rowspan="2" >Conversion Factor</th>
        <th colspan="2" class="text-center">Sale Price Discount (%)</th>
        <th colspan="2" class="text-center" [hidden]="userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0">Sale Price</th>
        <th colspan="2" class="text-center">Is Default</th>
        <th rowspan="2" style="width:5rem;" >Status</th>
      </tr>
      <tr>
        <th class="top-border" *ngIf="userSetting.EnableWSalesRate == 1">Retail Price</th>
        <th class="top-border text-center" colspan="2" *ngIf="userSetting.EnableWSalesRate == 0">Retail Price</th>
        <th class="top-border" *ngIf="userSetting.EnableWSalesRate == 1">Wholesale Price</th>
        <th class="top-border" [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.EnableWSalesRate == 0">Retail Price</th>
        <th class="top-border text-center" [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.EnableWSalesRate == 1" colspan="2">Retail Price</th>
        <th class="top-border"  [hidden]="userSetting.EnableWSalesRate == 0 || (userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0)">Wholesale Price</th>
        <th class="top-border text-center">Purchase</th>
        <th class="top-border text-center">Sales</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of AlternateUnits; let i = index;">
        <td>{{i+1}}</td>
        <td>{{item.ALTUNIT}}</td>
        <td>{{item.CONFACTOR}}</td>
        <td *ngIf="userSetting.EnableWSalesRate == 1">{{item.SRATE_DISCOUNT}}</td>
        <td *ngIf="userSetting.EnableWSalesRate == 0" colspan="2">{{item.SRATE_DISCOUNT}}</td>
        <td *ngIf="userSetting.EnableWSalesRate == 1">{{item.WSRATE_DISCOUNT}}</td>
        <td  [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.VatExcludingRate == 1 || userSetting.EnableWSalesRate == 0">{{item.RATE}}</td>
        <td  [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.VatExcludingRate == 1 || userSetting.EnableWSalesRate == 1" colspan="2">{{item.RATE}}</td>
        <td  [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.EnableWSalesRate == 0 || userSetting.VatExcludingRate == 1">{{item.RATE_B}}</td>
        <td  [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.VatExcludingRate == 0 || userSetting.EnableWSalesRate == 0">{{item.IN_RATE}}</td>
        <td  [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.VatExcludingRate == 0 || userSetting.EnableWSalesRate == 1" colspan="2">{{item.IN_RATE}}</td>
        <td  [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.EnableWSalesRate == 0 || userSetting.VatExcludingRate == 0">{{item.IN_RATE_B}}</td>
        <td style="text-align: center;"><input type="checkbox" [(ngModel)]="item.ISDEFAULT"></td>
        <td style="text-align: center;"><input type="checkbox" [(ngModel)]="item.ISDEFAULTPRATE"></td>
        <td>
          <div class="d-flex">
            <mat-slide-toggle [(ngModel)]="item.ISDISCONTINUE"
            class="custom-toggle text-center" style="line-height: 10px;"
            color="primary"
          ></mat-slide-toggle>
            <button type="button" class="btn p-0  remove-Btn">
          <mat-icon class="mat-icon-small text-danger" style="cursor: pointer;" (click)="removeAltUnit(i)">cancel</mat-icon>
            </button>
          </div>
        </td>      
      </tr>
      <tr>
        <td>{{AlternateUnits.length+1}}</td>
        <td>
          <select name="unit" id="unit" class="form-control" aria-label="Default select example" [(ngModel)]="CurAltUnit.ALTUNIT">
            <option *ngFor="let i of Units" [ngValue]="i.UNITS">{{i.UNITS}}</option>
          </select>
        </td>
        <td><input type="number" min="0" [(ngModel)]="CurAltUnit.CONFACTOR"></td>
        <td *ngIf="userSetting.EnableWSalesRate == 1"><input type="number" min="0" [(ngModel)]="CurAltUnit.SRATE_DISCOUNT"></td>
        <td *ngIf="userSetting.EnableWSalesRate == 0" colspan="2"><input type="number" min="0" [(ngModel)]="CurAltUnit.SRATE_DISCOUNT"></td>
        <td *ngIf="userSetting.EnableWSalesRate == 1"><input type="number" min="0" [(ngModel)]="CurAltUnit.WSRATE_DISCOUNT"></td>
        <td [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.VatExcludingRate == 0 || userSetting.EnableWSalesRate == 1" colspan="2"><input type="number" min="0" [(ngModel)]="CurAltUnit.RATE"  [disabled]="productObj.HASBATCH == 1" (change)="RecalculateNonVATAmount_EX_RATE()"></td>
        <td [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.VatExcludingRate == 0 || userSetting.EnableWSalesRate == 0"><input type="number" min="0" [(ngModel)]="CurAltUnit.RATE"  [disabled]="productObj.HASBATCH == 1" (change)="RecalculateNonVATAmount_EX_RATE()"></td>
        <td [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.EnableWSalesRate == 0 || userSetting.VatExcludingRate == 0"><input type="number" min="0" [(ngModel)]="CurAltUnit.RATE_B" [disabled]="productObj.HASBATCH == 1" (change)="RecalculateNonVATAmount_EX_RATE_B()"></td>
        <td [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.VatExcludingRate == 1 || userSetting.EnableWSalesRate == 1" colspan="2"><input type="number" min="0" [(ngModel)]="CurAltUnit.IN_RATE" [disabled]="productObj.HASBATCH == 1"  (change)="RecalculateVATAmount()"></td>
        <td [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.VatExcludingRate == 1 || userSetting.EnableWSalesRate == 0"><input type="number" min="0" [(ngModel)]="CurAltUnit.IN_RATE" [disabled]="productObj.HASBATCH == 1"  (change)="RecalculateVATAmount()"></td>
        <td [hidden]="(userSetting.EnableBatchWisePrice == 1 && userSetting.EnableBatch != 0) || userSetting.EnableWSalesRate == 0 ||userSetting.VatExcludingRate == 1"><input type="number" min="0" [(ngModel)]="CurAltUnit.IN_RATE_B" [disabled]="productObj.HASBATCH == 1"  (change)="RecalculateVATAmount()"></td>
        <td style="text-align: center;"><input type="checkbox" [(ngModel)]="CurAltUnit.ISDEFAULT"></td>
        <td style="text-align: center;"><input type="checkbox" [(ngModel)]="CurAltUnit.ISDEFAULTPRATE"></td>
        <td>
          <div class="d-flex">
            <mat-slide-toggle [(ngModel)]="CurAltUnit.ISDISCONTINUE"
            class="custom-toggle text-center" style="line-height: 10px;"
            color="primary"
          ></mat-slide-toggle>
            <button type="button" class="btn p-0  remove-Btn">
            </button>
          </div>
        </td>      
      </tr>
    </tbody>
  </table>
  <div class="mx-1">
    <mat-icon class="mat-icon-small text-primary mt-2" style="cursor: pointer;" (click)="addAltUnit()">add_circle_outline</mat-icon>
  </div>
</div>
