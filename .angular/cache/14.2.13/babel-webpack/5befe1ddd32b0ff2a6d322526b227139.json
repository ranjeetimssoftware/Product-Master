{"ast":null,"code":"import { ElementRef } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../party-master-library.service\";\nimport * as i2 from \"../../config.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/material/icon\";\nconst _c0 = [\"fileSelect\"];\n\nfunction DocumentUploadComponent_th_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"th\");\n    i0.ɵɵtext(1, \"Action\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction DocumentUploadComponent_tr_22_td_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\")(1, \"mat-icon\", 15);\n    i0.ɵɵlistener(\"click\", function DocumentUploadComponent_tr_22_td_5_Template_mat_icon_click_1_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const i_r5 = i0.ɵɵnextContext().index;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.ToggleDoc(i_r5));\n    });\n    i0.ɵɵtext(2, \"remove_red_eye \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"mat-icon\", 16);\n    i0.ɵɵlistener(\"click\", function DocumentUploadComponent_tr_22_td_5_Template_mat_icon_click_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const i_r5 = i0.ɵɵnextContext().index;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.deleteFile(i_r5));\n    });\n    i0.ɵɵtext(4, \"delete outline\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction DocumentUploadComponent_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, DocumentUploadComponent_tr_22_td_5_Template, 5, 0, \"td\", 12);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const doc_r4 = ctx.$implicit;\n    const i_r5 = ctx.index;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i_r5 + 1);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(doc_r4.documentFileName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.mode != \"view\");\n  }\n}\n\nfunction DocumentUploadComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 17)(1, \"div\", 18)(2, \"h4\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"mat-icon\", 20);\n    i0.ɵɵlistener(\"click\", function DocumentUploadComponent_div_23_Template_mat_icon_click_4_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.closeDocView());\n    });\n    i0.ɵɵtext(5, \"cancel\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(6, \"div\", 21)(7, \"img\", 22);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r3.doc.documentFileName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"src\", ctx_r3.apiUrl + \"/\" + ctx_r3.doc.path, i0.ɵɵsanitizeUrl);\n  }\n}\n\nexport let DocumentUploadComponent = /*#__PURE__*/(() => {\n  class DocumentUploadComponent {\n    constructor(partyMasterService, configService) {\n      this.partyMasterService = partyMasterService;\n      this.configService = configService;\n      this.viewDoc = false;\n      this.doc = {};\n      this.apiUrl = '';\n      this.documentUpload = [];\n      this.mode = 'add';\n      this.displayedColumns = ['sn', 'Document', 'action'];\n    }\n\n    ngOnInit() {\n      this.apiUrl = this.configService.getApiUrl();\n    }\n\n    ngAfterViewInit() {}\n\n    fileUpload(event) {\n      const input = event.target;\n\n      if (input.files && input.files.length > 0) {\n        this.fileToUpload = input.files[0];\n        this.documentName = input.files[0].name;\n      }\n    }\n\n    uploadFile() {\n      const formData = new FormData();\n      formData.append(\"DocumentHeading\", this.documentName);\n      formData.append(\"file\", this.fileToUpload);\n      formData.append(\"TenantId\", '');\n      this.partyMasterService.uploadDocument(formData).subscribe(res => {\n        if (res.message) {\n          const sanitizedPath = res.path.replace(/\\\\/g, '/').replace(/\\/+/g, '/');\n          const finalUrl = `${sanitizedPath}`;\n          let el = {\n            documentExtenstion: this.fileToUpload.type,\n            documentFileName: this.documentName,\n            acid: '',\n            path: finalUrl\n          };\n          this.documentUpload.push(el);\n          this.partyMasterService.openSuccessDialog(res.message);\n          this.fileToUpload = undefined;\n          this.fileSelect.nativeElement.value = null;\n        } else if (res.status == \"error\") {\n          this.partyMasterService.openErrorDialog(res.status);\n        }\n      }, error => {\n        console.log(\"error\", error.message);\n      });\n    }\n\n    deleteFile(i) {\n      this.documentUpload.splice(i, 1);\n    }\n\n    ToggleDoc(i) {\n      this.viewDoc = true;\n      this.doc = this.documentUpload[i];\n    }\n\n    closeDocView() {\n      this.viewDoc = false;\n      ;\n    }\n\n  }\n\n  DocumentUploadComponent.ɵfac = function DocumentUploadComponent_Factory(t) {\n    return new (t || DocumentUploadComponent)(i0.ɵɵdirectiveInject(i1.PartyMasterLibraryService), i0.ɵɵdirectiveInject(i2.ConfigService));\n  };\n\n  DocumentUploadComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DocumentUploadComponent,\n    selectors: [[\"lib-document-upload\"]],\n    viewQuery: function DocumentUploadComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.fileSelect = _t.first);\n      }\n    },\n    inputs: {\n      documentUpload: \"documentUpload\",\n      mode: \"mode\"\n    },\n    decls: 24,\n    vars: 3,\n    consts: [[1, \"d-flex\", \"justify-content-start\", \"align-items-center\"], [1, \"col-md-2\"], [1, \"col-md-4\"], [1, \"dashed-border\", \"d-flex\", \"flex-column\", \"justify-content-between\", \"align-items-center\", \"p-4\", \"my-2\", \"gap-4\"], [\"width\", \"25\", \"height\", \"24\", \"viewBox\", \"0 0 25 24\", \"fill\", \"none\", \"xmlns\", \"http://www.w3.org/2000/svg\"], [\"d\", \"M11.6673 17.9613V3.54467L7.78398 7.42801L6.60398 6.23134L12.5007 0.333008L18.399 6.23134L17.219 7.42968L13.334 3.54467V17.9613H11.6673ZM0.833984 23.6663V16.9363H2.50065V21.9997H22.5007V16.9363H24.1673V23.6663H0.833984Z\", \"fill\", \"black\"], [\"type\", \"file\", \"id\", \"uploadingPhoto\", \"placeholder\", \"Browse\", \"accept\", \".png, .jpg, .jpeg\", 1, \"btn\", \"btn-sm\", \"btn-light\", 2, \"height\", \"36px\", 3, \"change\"], [\"fileSelect\", \"\"], [1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"col-md-6\"], [1, \"table-container\", \"scrollable-table\"], [2, \"width\", \"10%\"], [4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"row col-md-6 shadow rounded custom-position bg-white\", 4, \"ngIf\"], [1, \"mat-icon-small\", 3, \"click\"], [1, \"mat-icon-small\", \"text-danger\", 2, \"cursor\", \"pointer\", 3, \"click\"], [1, \"row\", \"col-md-6\", \"shadow\", \"rounded\", \"custom-position\", \"bg-white\"], [1, \"row\", \"col-md-12\", \"mb-2\"], [1, \"col-md-10\"], [1, \"col-md-2\", \"mat-icon-small\", 3, \"click\"], [1, \"border-bottom\", \"border-secondary\"], [2, \"height\", \"2.5rem\", \"width\", \"2.5rem\", 3, \"src\"]],\n    template: function DocumentUploadComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵtext(2, \"Documents\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(3, \"div\", 2)(4, \"div\", 3);\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(5, \"svg\", 4);\n        i0.ɵɵelement(6, \"path\", 5);\n        i0.ɵɵelementEnd();\n        i0.ɵɵtext(7, \" Drag & Drop Images to Upload \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(8, \"input\", 6, 7);\n        i0.ɵɵlistener(\"change\", function DocumentUploadComponent_Template_input_change_8_listener($event) {\n          return ctx.fileUpload($event);\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function DocumentUploadComponent_Template_button_click_10_listener() {\n          return ctx.uploadFile();\n        });\n        i0.ɵɵtext(11, \"Upload\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(12, \"div\", 9)(13, \"div\", 10)(14, \"table\")(15, \"thead\")(16, \"th\", 11);\n        i0.ɵɵtext(17, \"SN\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(18, \"th\");\n        i0.ɵɵtext(19, \"Document\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵtemplate(20, DocumentUploadComponent_th_20_Template, 2, 0, \"th\", 12);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"tbody\");\n        i0.ɵɵtemplate(22, DocumentUploadComponent_tr_22_Template, 6, 3, \"tr\", 13);\n        i0.ɵɵelementEnd()()()()();\n        i0.ɵɵtemplate(23, DocumentUploadComponent_div_23_Template, 8, 2, \"div\", 14);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(20);\n        i0.ɵɵproperty(\"ngIf\", ctx.mode != \"view\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"ngForOf\", ctx.documentUpload);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.viewDoc);\n      }\n    },\n    dependencies: [i3.NgForOf, i3.NgIf, i4.MatIcon],\n    styles: [\"table[_ngcontent-%COMP%]{width:100%}.table-container[_ngcontent-%COMP%]{padding:0 3rem}tr.mat-header-row[_ngcontent-%COMP%]{height:40px}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{line-height:2.5rem}tr[_ngcontent-%COMP%]:nth-child(even){background-color:#f6f6f6f5;padding:0}.mat-mdc-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{border-bottom:1px solid transparent;border-top:1px solid transparent;cursor:pointer;padding-bottom:0}.mat-menu-item[_ngcontent-%COMP%]{padding:0 5px;height:35px}.input-group[_ngcontent-%COMP%]   .input-group-text[_ngcontent-%COMP%]{background-color:#f6f6f6;border-radius:4px}.form-control[_ngcontent-%COMP%]{border-left:none;padding-right:80px;width:90%}.negative-margin[_ngcontent-%COMP%]{margin:2px}.dashed-border[_ngcontent-%COMP%]{border:1px dashed gray}.scrollable-table[_ngcontent-%COMP%]{height:30vh;overflow-y:scroll;overflow-x:hidden}.custom-position[_ngcontent-%COMP%]{position:absolute;z-index:99999;top:0;left:50%;width:45%}\"]\n  });\n  return DocumentUploadComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}