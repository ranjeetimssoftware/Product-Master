{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/forms\";\nimport * as i3 from \"../../party-master-library.service\";\nimport * as i4 from \"../../shared/components/generic/generic-nested-dropdown/generic-nested-dropdown.component\";\nexport let CreateLedgerGroupComponent = /*#__PURE__*/(() => {\n  class CreateLedgerGroupComponent {\n    constructor(router, fb, _activatedRoute, partyMasterService) {\n      this.router = router;\n      this.fb = fb;\n      this._activatedRoute = _activatedRoute;\n      this.partyMasterService = partyMasterService;\n      this.mode = 'add';\n      this.ledgerGroup = {};\n      this.ledgerGroupForm = this.fb.group({\n        AccountType: ['', Validators.required],\n        ParentGroup: ['', Validators.required],\n        GroupName: ['', Validators.required]\n      });\n      this.getParentGroupTree();\n    }\n\n    ngOnInit() {\n      if (!!this._activatedRoute.snapshot.params['returnUrl']) {\n        this.returnUrl = this._activatedRoute.snapshot.params['returnUrl'];\n      }\n\n      if (!!this._activatedRoute.snapshot.params['mode']) {\n        if (this._activatedRoute.snapshot.params['mode'] === 'view') {\n          this.mode = 'view';\n          this.ledgerGroupForm.disable();\n        }\n\n        let acid = this._activatedRoute.snapshot.params['acid'];\n        this.partyMasterService.getLedgerGroup(acid).subscribe(res => {\n          if (res.status == \"ok\") {\n            this.ledgerGroup = res.result;\n            this.filterParentGroup(this.ledgerGroup.ACTYPE);\n          } else if (res.status == \"error\") {\n            this.partyMasterService.openErrorDialog(res.result);\n          }\n        }, error => {\n          this.partyMasterService.openErrorDialog(error.error.detail);\n        });\n      }\n    }\n\n    getParentGroupTree() {\n      this.partyMasterService.getParentGroupTree().subscribe(res => {\n        if (res.status == \"ok\") {\n          this.menuData = res.result;\n        }\n      });\n    }\n\n    onAccountTypeChange(event) {\n      const input = event.target;\n      this.filterParentGroup(input.value);\n    }\n\n    filterParentGroup(actype) {\n      this.ParentGroup = this.menuData.filter(x => x.actype == actype);\n    }\n\n    onSelectParent(event) {\n      this.ledgerGroup.PARENT = event.accode;\n    }\n\n    goBack() {\n      this.router.navigate([this.returnUrl]); // Navigate to the previous route\n    }\n\n    onSubmit() {\n      if (this.ledgerGroup.ACTYPE == '' || this.ledgerGroup.ACTYPE == null || this.ledgerGroup.ACTYPE == undefined) {\n        this.partyMasterService.openSuccessDialog(\"Please select Account Type.\");\n        return;\n      }\n\n      if (this.ledgerGroup.PARENT == '' || this.ledgerGroup.PARENT == undefined || this.ledgerGroup.PARENT == null) {\n        this.partyMasterService.openSuccessDialog(\"Please select Parent Group.\");\n        return;\n      }\n\n      if (this.ledgerGroup.ACNAME == '' || this.ledgerGroup.ACNAME == undefined || this.ledgerGroup.ACNAME == null) {\n        this.partyMasterService.openSuccessDialog(\"Please Enter Group Name.\");\n        return;\n      }\n\n      this.partyMasterService.saveNewLedgerGroup(this.mode, this.ledgerGroup).subscribe(res => {\n        if (res.status == 'ok') {\n          this.partyMasterService.openSuccessDialog(res.result);\n          this.ledgerGroup = {};\n          this.router.navigate([this.returnUrl]); // Navigate to the previous route\n        } else if (res.status == 'error') {\n          this.partyMasterService.openErrorDialog(res.result);\n        } else if (res.status == 400) {\n          this.partyMasterService.openErrorDialog(res.detail);\n        }\n      }, error => {\n        this.partyMasterService.openErrorDialog(error.error.detail);\n      });\n    }\n\n  }\n\n  CreateLedgerGroupComponent.ɵfac = function CreateLedgerGroupComponent_Factory(t) {\n    return new (t || CreateLedgerGroupComponent)(i0.ɵɵdirectiveInject(i1.Router), i0.ɵɵdirectiveInject(i2.FormBuilder), i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i3.PartyMasterLibraryService));\n  };\n\n  CreateLedgerGroupComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CreateLedgerGroupComponent,\n    selectors: [[\"lib-create-ledger-group\"]],\n    decls: 63,\n    vars: 8,\n    consts: [[1, \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"col-md-6\", \"px-0\"], [1, \"mb-0\", \"heading\"], [1, \"pe-5\", \"col-md-6\", \"d-flex\", \"justify-content-end\"], [\"id\", \"save\", 1, \"btn\", \"mr-2\", \"px-4\", 3, \"disabled\", \"click\"], [\"id\", \"back\", 1, \"btn\", \"px-4\", 3, \"click\"], [1, \"border-bottom\", \"mb-3\"], [1, \"container\", \"scrollable-content\"], [3, \"formGroup\"], [1, \"row\"], [1, \"col-md-9\"], [1, \"row\", \"d-flex\", \"align-items-center\", \"mb-2\"], [1, \"col-12\", \"col-md-3\"], [\"for\", \"accountType\", 1, \"form-label\", \"mr-2\"], [1, \"star\", \"mx-2\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"width\", \"17\", \"height\", \"17\", \"viewBox\", \"0 0 17 17\", \"fill\", \"none\"], [\"d\", \"M9.03125 11.6875V7.4375H6.90625V8.5H7.96875V11.6875H6.375V12.75H10.625V11.6875H9.03125ZM8.5 4.25C8.34239 4.25 8.18833 4.29674 8.05728 4.3843C7.92623 4.47186 7.8241 4.59631 7.76378 4.74192C7.70347 4.88753 7.68769 5.04776 7.71844 5.20234C7.74918 5.35692 7.82508 5.49891 7.93652 5.61035C8.04797 5.7218 8.18996 5.79769 8.34454 5.82844C8.49912 5.85919 8.65934 5.84341 8.80495 5.78309C8.95056 5.72278 9.07502 5.62064 9.16258 5.48959C9.25014 5.35855 9.29688 5.20448 9.29688 5.04688C9.29688 4.83553 9.21292 4.63284 9.06348 4.4834C8.91403 4.33396 8.71134 4.25 8.5 4.25Z\", \"fill\", \"#9E9E9E\"], [\"d\", \"M8.5 15.9375C7.02901 15.9375 5.59104 15.5013 4.36795 14.6841C3.14486 13.8668 2.19158 12.7052 1.62865 11.3462C1.06572 9.98719 0.918435 8.49175 1.20541 7.04902C1.49239 5.60629 2.20074 4.28105 3.2409 3.2409C4.28105 2.20074 5.60629 1.49239 7.04902 1.20541C8.49175 0.918435 9.98719 1.06572 11.3462 1.62865C12.7052 2.19158 13.8668 3.14486 14.6841 4.36795C15.5013 5.59104 15.9375 7.02901 15.9375 8.5C15.9375 10.4726 15.1539 12.3643 13.7591 13.7591C12.3643 15.1539 10.4726 15.9375 8.5 15.9375ZM8.5 2.125C7.23915 2.125 6.00661 2.49889 4.95824 3.19938C3.90988 3.89988 3.09278 4.89552 2.61027 6.0604C2.12776 7.22528 2.00152 8.50707 2.2475 9.7437C2.49348 10.9803 3.10064 12.1162 3.9922 13.0078C4.88376 13.8994 6.01967 14.5065 7.2563 14.7525C8.49293 14.9985 9.77473 14.8722 10.9396 14.3897C12.1045 13.9072 13.1001 13.0901 13.8006 12.0418C14.5011 10.9934 14.875 9.76086 14.875 8.5C14.875 6.80925 14.2034 5.18774 13.0078 3.9922C11.8123 2.79665 10.1908 2.125 8.5 2.125Z\", \"fill\", \"#9E9E9E\"], [1, \"col-11\", \"col-md-5\"], [\"type\", \"text\", \"id\", \"accountType\", \"formControlName\", \"AccountType\", 1, \"form-control\", \"px-2\", \"py-1\", 3, \"ngModel\", \"change\", \"ngModelChange\"], [\"value\", \"AT\"], [\"value\", \"LB\"], [\"value\", \"DI\"], [\"value\", \"DE\"], [\"value\", \"II\"], [\"value\", \"ID\"], [\"value\", \"CA\"], [\"for\", \"parentGroup\", 1, \"form-label\", \"mr-2\"], [3, \"menuData\", \"mode\", \"selectedItem\", \"onItemClick\"], [\"for\", \"groupName\", 1, \"form-label\", \"mr-2\"], [\"type\", \"text\", \"id\", \"groupName\", \"formControlName\", \"GroupName\", \"placeholder\", \"Enter Group Name\", 1, \"form-control\", \"px-2\", \"py-1\", 3, \"ngModel\", \"ngModelChange\"]],\n    template: function CreateLedgerGroupComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h5\", 2);\n        i0.ɵɵtext(3, \"New Ledger Group \");\n        i0.ɵɵelementStart(4, \"span\");\n        i0.ɵɵtext(5);\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(6, \"div\", 3)(7, \"button\", 4);\n        i0.ɵɵlistener(\"click\", function CreateLedgerGroupComponent_Template_button_click_7_listener() {\n          return ctx.onSubmit();\n        });\n        i0.ɵɵtext(8, \"SAVE\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(9, \"button\", 5);\n        i0.ɵɵlistener(\"click\", function CreateLedgerGroupComponent_Template_button_click_9_listener() {\n          return ctx.goBack();\n        });\n        i0.ɵɵtext(10, \"BACK\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(11, \"div\", 6);\n        i0.ɵɵelementStart(12, \"div\", 7)(13, \"form\", 8)(14, \"div\", 9)(15, \"div\", 10)(16, \"div\", 11)(17, \"div\", 12)(18, \"label\", 13);\n        i0.ɵɵtext(19, \"Account Type\");\n        i0.ɵɵelementStart(20, \"span\", 14);\n        i0.ɵɵtext(21, \"*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(22, \"svg\", 15);\n        i0.ɵɵelement(23, \"path\", 16)(24, \"path\", 17);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(25, \"div\", 18)(26, \"select\", 19);\n        i0.ɵɵlistener(\"change\", function CreateLedgerGroupComponent_Template_select_change_26_listener($event) {\n          return ctx.onAccountTypeChange($event);\n        })(\"ngModelChange\", function CreateLedgerGroupComponent_Template_select_ngModelChange_26_listener($event) {\n          return ctx.ledgerGroup.ACTYPE = $event;\n        });\n        i0.ɵɵelementStart(27, \"option\", 20);\n        i0.ɵɵtext(28, \"ASSETS\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"option\", 21);\n        i0.ɵɵtext(30, \"LIABILITIES\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(31, \"option\", 22);\n        i0.ɵɵtext(32, \"DIRECT INCOME\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"option\", 23);\n        i0.ɵɵtext(34, \"DIRECT EXPENSES\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(35, \"option\", 24);\n        i0.ɵɵtext(36, \"INDIRECT INCOME\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"option\", 25);\n        i0.ɵɵtext(38, \"INDIRECT EXPENSES\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"option\", 26);\n        i0.ɵɵtext(40, \"CAPITAL A/C\");\n        i0.ɵɵelementEnd()()()();\n        i0.ɵɵelementStart(41, \"div\", 11)(42, \"div\", 12)(43, \"label\", 27);\n        i0.ɵɵtext(44, \" Parent Group \");\n        i0.ɵɵelementStart(45, \"span\", 14);\n        i0.ɵɵtext(46, \"*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(47, \"svg\", 15);\n        i0.ɵɵelement(48, \"path\", 16)(49, \"path\", 17);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(50, \"div\", 18)(51, \"lib-generic-nested-dropdown\", 28);\n        i0.ɵɵlistener(\"onItemClick\", function CreateLedgerGroupComponent_Template_lib_generic_nested_dropdown_onItemClick_51_listener($event) {\n          return ctx.onSelectParent($event);\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(52, \"div\", 11)(53, \"div\", 12)(54, \"label\", 29);\n        i0.ɵɵtext(55, \"Group Name\");\n        i0.ɵɵelementStart(56, \"span\", 14);\n        i0.ɵɵtext(57, \"*\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceSVG();\n        i0.ɵɵelementStart(58, \"svg\", 15);\n        i0.ɵɵelement(59, \"path\", 16)(60, \"path\", 17);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵnamespaceHTML();\n        i0.ɵɵelementStart(61, \"div\", 18)(62, \"input\", 30);\n        i0.ɵɵlistener(\"ngModelChange\", function CreateLedgerGroupComponent_Template_input_ngModelChange_62_listener($event) {\n          return ctx.ledgerGroup.ACNAME = $event;\n        });\n        i0.ɵɵelementEnd()()()()()()();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(5);\n        i0.ɵɵtextInterpolate1(\"[\", ctx.mode, \"]\");\n        i0.ɵɵadvance(2);\n        i0.ɵɵproperty(\"disabled\", ctx.mode == \"view\");\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"formGroup\", ctx.ledgerGroupForm);\n        i0.ɵɵadvance(13);\n        i0.ɵɵproperty(\"ngModel\", ctx.ledgerGroup.ACTYPE);\n        i0.ɵɵadvance(25);\n        i0.ɵɵproperty(\"menuData\", ctx.ParentGroup)(\"mode\", ctx.mode)(\"selectedItem\", ctx.ledgerGroup.parentacname);\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.ledgerGroup.ACNAME);\n      }\n    },\n    dependencies: [i2.ɵNgNoValidate, i2.NgSelectOption, i2.ɵNgSelectMultipleOption, i2.DefaultValueAccessor, i2.SelectControlValueAccessor, i2.NgControlStatus, i2.NgControlStatusGroup, i2.FormGroupDirective, i2.FormControlName, i4.GenericNestedDropdownComponent],\n    styles: [\".heading[_ngcontent-%COMP%]{margin-left:3rem;font:400 1.75rem/2.25rem Roboto,sans-serif;letter-spacing:0}.scrollable-content[_ngcontent-%COMP%]{height:85vh;overflow-y:scroll}#save[_ngcontent-%COMP%]{background-color:#4081bf;color:#fff;font-size:14px;font-weight:200}#back[_ngcontent-%COMP%]{color:#336799;border:1px solid rgba(51,103,153,1);font-size:14px}#back[_ngcontent-%COMP%]:hover, #save[_ngcontent-%COMP%]:hover{background-color:#336899ac;color:#fff}label[_ngcontent-%COMP%], input[type=select][_ngcontent-%COMP%], input[type=text][_ngcontent-%COMP%]{font-family:Inter,sans-serif;font-weight:500;font-size:16px}input[_ngcontent-%COMP%]::placeholder{color:#acacac;font-size:14px;font-weight:400!important}.star[_ngcontent-%COMP%]{color:red}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{border-color:#007bff40;box-shadow:0 0 0 .1rem #007bff40}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{font-size:14px}@media (min-width:1200px){.container[_ngcontent-%COMP%]{max-width:1260px;padding-bottom:5%}}\"]\n  });\n  return CreateLedgerGroupComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}